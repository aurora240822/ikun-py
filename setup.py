###############################################################################################################
#    ...............                        |      /                                                            #
#  ................... .                    |     | /    {      }   /\    /                                               #
# .........................                 |    |ã€    {      }   /  \  /                                             #
# ..........................                |   |   ã€  { ____}   /    \/                                                   #
# .............................                                                                               #
# ................................                                                                            #
# ..................................                                                                          #
# .....................................                                                                       #
# ........................................                      .   .,]O@@@@@\]. .  .                         #
# .........................................                       ./@@@@@@@@@@@@@@@].   .                     #
# .........................................   .   ,/@@@@@@@\]`. ./@@@O`........,\@@@@@@] .                    #
# ...........................................,]@@@@@@@@@@@@@@@@@@@@/... ...    ....,\@@@@@\.                  #
# .......................................]@@@@@@@/`.............,[`..  ................,@@@@@\`    .          #
# ...................................,/@@@@@/[.........  .    ..  ...  ..................][@@@@@`  .          #
# ................................,/@@@@@/`.....,/[]`^........../@\....,@@\..... ..........[]\@@@@\.          #
# ............................../@@@@O```...]/[`*,`...........,@@@@../@@@@@@@\..........  ....\/@@@@\. .      #
# ...........................,@@@@@\/` ..]oo*[...............,@@@/,@@@@@\`[@@@@O``.........  ....,O@@@\.   .  #
# ........................./@@@@/o. ..`\^o...................@@@O=@@@@@@@@@@@@@@@@`.... ...... ..../\@@@\.  . #
# ......................./@@@@[`. ..*/\[..... .]]..... .....=@@@@@@@@@@@@OOOO@@@@@@\^... @@@`..  ...*\O@@@`   #
# ...................../@@@/``. ..,[^^.....  ,o*`......]`...O@@@/[`**************\@@@O\..,@@@\... ....//@@@\  #
# .................../@@@@\` .............  .=/.......==/..,@@@^****.........*****\@@@^=...\@@@`.......*/@@@\ #
#  ................,@@@@`^. ......,@@`.... .[]*......./\*..=@@@****............****=@@@^\..=\@@@^... ...\/@@@\#
#     ............=@@@/*. ..... .,@@@^... .*,`........,o...=@@@@@@@@@\`..........***=@@@`....\@@@^... ...`,@@@#
#   .   ........./@@@[` ...... ..@@@^... .,*^....  ../]^...@@@^....[\@@@@`.......,/@@@@@/` ...,@@@^... ...^=@@#
#          .....@@@@\. ...*]` ..=@@@...  ,,\..... ...o\....@@@^..      \@@@`....@@@/`=@@@/` ...,@@@^......*/O@#
#             ./@@@*.=@@@*=o. ..O@@O*.. .^`^.... ...,o`....@@@*..        \@@\.,@@/  .,@@@@O]`..,/@@@^.......,@#
#             /@@@\..@@@`*^=. ..@@@^... .*\................@@@...         =@@@@@/   ..@@@@@@@@@@@@@@@^.......@#
#            .=@@@\`=@@@.=*^ ..=@@@^.. .==^.... ..../@@`...@@@*..  ,@@@@@^ \@@@@    ....../@@@@@@@@@@@...**..\#
#            . .\@@@@@@O.,^* ..=@@@*.. .*=^..=@@`...\@@@@@\@@@^.   @@@@@@@^=@@@^         =@@@@@@@.*@@@\..\/*./#
#                ..[=@@^.*,^...=@@@*.. .*=^.=@@@`..]@@@@@@@@@@O..  \@@@@@@ =@@@^         ,@@@@@@^.O@@@@\.==`=@#
#                   =@@^.*^*...=@@@/....*^`.=@@@@@@@@@@@...[[....    [[[`  @@@@@.          [\O[  @@@O@@@@O]@@@#
#                   =@@^.=^*...=@@@^^.......O@@@@@/`*\@@@` ......        ,@@@^@@@`             ,@@@`**,@@@@@@/#
#                   =@@^..\//@@@@@@^\.. ....O@@OO\**,..\@@@]           ,/@@@```\@@@`         ]@@@/.,]oOO@@@.  #
#                   ,@@@@@@@@@@O@@@O=`.....,/@@@OOO`.....[@@@@@]]]]]/@@@@@@@@@@@@@@@@@@@O@@@@@@`./OOOOOOO@@^  #
#                    ,@@@/\@@\]==@@@@@@@@@@@@@@@OOOO`.......,\@@@@@@@@@[...........,\@@@@/[[....OOOOOOOOO@@^  #
#                   ..]]]]/@@^..=OO@@@@@@@OOOOOOOOOO\............,@@/.................,@@@.....OOOOOOOOOO@@@  #
#         .   ,/@@@@@@@@@@@@@@...OOOOOOOOOOOOOOOOOOOO............@@@..................,@@@^...=OOOOOOOOOO@@O  #
#        .]@@@@@@O/\/^*oooo@@@^..\OOOOOOOOOOOOOOOOOO^............@@@@\............,]@@@@@@^...=OOOOOOOOO@@@^  #
#  .  ./@@@@O^o]/\oo/oo[\ooO@@@...OOOOOOOOOOOOOOOOOO.............=@@@@@@@@@@@@@@@@@@@/./@@.....OOOOOOOOO@@/   #
#   ./@@@@@@@@@@OOO]/oO]]OO@@@@@...\OOOOOOOOOOOOOO/...............,@@@],,[[[[[[[.....,@@/......=OOOOOOO@@@.   #
#  /@@@/o\`[[\@@@@@@@@@@@@@@@@@@@`...\OOOOOOOOOO/...................,\@@@@]].....]]@@@/`........=OOOO@@@@. .  #
# @@@\^\oo/[[\/\\]]]]/o/`/\ooOO@@@@`.....................................[\@@@@@@@/[..............\@@@@/...   #
# @@@@O\//\\,[\/\ooooooooooooo@@@@@@@\`.,]]O@@@@@@@@@@@@@@@@@@@@@@@@@@@O]]]...................,]/@@@@O........#
# @O@@@@@@@@@OO\/ooooooooooooO@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@]]`.......=@@@@@@@@@@@@]...#
# oooooo/[[O@@@@@@@@\oo]o,oooO@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@^..#
# \\\ooo\[o/\o]o\[O@@@@@@@OOoO@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@...#
# oooooooooooooooooooooOO@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@/....#
# /o=ooooooooooooooo\/\o//\/o@@@@@OO@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@/[[@^....#
# \oooo/[,/[\]ooooooooooooooO@^.............,\@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@/`.......@^....#
# @@@@@@@@@O]]/\ooooooooooooo@@O\]]]]`.........,@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@/........,]]@^....#
# ,`\o[[\@@@@@@@@\/[^o\`\o^oooo@@@@@@@@@@\`......=@/[\@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@/[[`=@/......]@@@@@@@.....#
# \/\\]/\/o[\//O@@@@@O/oooooooO@@@@@@@@@@@@@@`....\@O]]`....,[\@@@@@@@@@@@@/[[....,]]O@@@`....,@@@@@@@@@@@`...#
# \ooooooooooooo/ooO@@@@\/\ooO@@@@@@@@@@@@@@@@^...,@@@@@@@@@@O]]]........]]/@@@@@@@@@@@@^....@@@@@@@@@@@@@@`..#
# @o=ooooooooooo\[\/[/\@@@OooO@@@@@@@@@@@@@@@@@....@@@@@@@@@@@@@@@@@O.=@@@@@@@@@@@@@@@@@`...=@@@@@@@@@@@@@@@`.#
# ,@^o\/oooooooooooo/o\/\@@@@O@@@@@@@@@@@@@@@@@....@@@@@@@@@@@@@@@^......,@@@@@@@@@@@@@@....@@@@@@@@@@@@@@@@@.#
###############################################################################################################
#2024-ikun-setup.py#
from setuptools import setup, find_packages
import os
import platform
import sys,time
import subprocess
#print hello world
import tkinter as tk
from tkinter import  messagebox
import threading
system_os = platform.system()
#ikun_music_run()
from PIL import Image, ImageTk
import random
import sounddevice as sd
import soundfile as sf
messagebox.showwarning('æç¤º','ç¨‹åºä¸æ˜¯ç—…æ¯’ï¼Œä»…ä¸ºæ¶æï¼Œä»£ç å¼€æºï¼Œåœ°å€å¾…å®š')
time.sleep(1)
ikun_exit_now=messagebox.askyesno('æç¤º','å‰æ–¹é«˜èƒ½ï¼Œè¯·å¸¦å¥½è€³æœºï¼Œä¸è¦åœ¨å…¬å…±åœºåˆé£Ÿç”¨,åœæ­¢è¿è¡Œè¯·å¤šæ¬¡ctrl+cï¼Œæ˜¯å¦ç»§ç»­')
#æ˜¯ é€€å‡º å¦ ç»§ç»­
if ikun_exit_now==False:
    sys.exit()
else:
    messagebox.showinfo('æç¤º','è°ƒå¥½éŸ³é‡ï¼Œå“å‘€ï¼Œä½ å¹²å˜›ï¼Œå‘è½¦äº†|emm,è¿™åªæ˜¯setup')
# å®šä¹‰åˆå§‹å·¥å…·ç±»
class Ikun_Jntm_Playback:
    def __init__(self, file_path, start_time=5, end_time=7.3):
        # è¯»å–éŸ³é¢‘æ–‡ä»¶
        self.data, self.fs = sf.read(file_path, dtype='float32')
        self.data_t,self.fs_t=sf.read('./assets/jntm.mp3', dtype='float32')
        self.start_sample = int(start_time * self.fs)  # èµ·å§‹æ’­æ”¾æ—¶é—´ç‚¹
        self.end_sample = int(end_time * self.fs)      # ç»“æŸæ’­æ”¾æ—¶é—´ç‚¹

    def play_audio_segment(self):
        # æ’­æ”¾éŸ³é¢‘ç‰‡æ®µ
        sd.play(self.data[self.start_sample:self.end_sample], self.fs)
        sd.sleep(1000)  # æ’­æ”¾åæš‚åœ1ç§’
    def play_audio_segment_niganma(self):
        # æ’­æ”¾éŸ³é¢‘ç‰‡æ®µ
        sd.play(self.data_t[self.start_sample:self.end_sample], self.fs_t)
        sd.sleep(1000)  # æ’­æ”¾åæš‚åœ1ç§’
    def ikun_music_really_run(self, ikun_music_play_mode="common"):
        n = 100
        playback_thread_niganma = threading.Thread(target=self.play_audio_segment_niganma)
        playback_thread_niganma.start()
        if ikun_music_play_mode == "common":

            while n > 0:
                n -= 1
                time.sleep(0.3)
                while True:
                    playback_thread_one = threading.Thread(target=self.play_audio_segment)
                    playback_thread_two = threading.Thread(target=self.play_audio_segment)
                    playback_thread_one.start()
                    time.sleep(0.7)
                    playback_thread_two.start()
        else:
            while n > 0:
                n -= 1
                time.sleep(0.3)
                playback_thread_one = threading.Thread(target=self.play_audio_segment)
                playback_thread_two = threading.Thread(target=self.play_audio_segment)
                playback_thread_one.start()
                time.sleep(0.7)
                playback_thread_two.start()

    def stop(self):
        sd.stop()


    
class Tool:
    def __init__(self, root):
        self.root = root
        self.system_os = platform.system()
        self.setup_dict = {
            'name': 'ikun',
            'version': '0.0.25',
            'pip_Available': self.pip_available(),
            'start_install_time': time.strftime('%Y-%m-%d %H:%M:%S', time.localtime(time.time())),
            'system_os': self.system_os,
            'img_box': self.show_random_popup(),
            
            
        }


        # åŠ è½½å¹¶æ˜¾ç¤ºå›¾ç‰‡
        self.image_path = "./assets/ikun_mini.png"  # æ›¿æ¢ä¸ºä½ çš„å›¾ç‰‡è·¯å¾„
        self.image = Image.open(self.image_path)
        self.photo = ImageTk.PhotoImage(self.image)
        
        # åˆ›å»ºå›¾ç‰‡æ ‡ç­¾
        self.label = tk.Label(self.root, image=self.photo)
        self.label.pack(expand=True, fill=tk.BOTH)
        self.ikun_text_list=['å¹²å˜›', 'ä½ ', 'å“å‘€', 'é¸¡é¸¡ä½ å°¼å¤ªç¾', 'ä½œè€…leebro', 'åŠä½ å¤ªç¾', 'æ¨¡å—æ­£åœ¨å®‰è£…', 'å°é»‘å­', 'ikun', 'æ¥åˆ°', 'æ¬¢è¿', 'ä½ å¥½']

        # åˆ›å»ºæŒ‰é’®å¹¶æ”¾ç½®åœ¨ä¸»çª—å£ä¸­

        
        self.popup_count = 25
        threading.Thread(target=self.show_popups).start()  # å¯åŠ¨å¼¹çª—çº¿ç¨‹ï¼Œself.show_popups()
        threading.Thread(target=self.play_music).start()

        # åˆå§‹åŒ–è®¾ç½®å­—å…¸

    
    def play_music(self):
            # æ’­æ”¾éŸ³ä¹çš„é€»è¾‘
            try:
                
                player = Ikun_Jntm_Playback('./assets/jntm.mp3')
                try:
                    player.ikun_music_really_run('common')
                except KeyboardInterrupt:
                    print("\næ’­æ”¾å·²åœæ­¢")
                    player.stop()
                
                # å®é™…çš„æ’­æ”¾éŸ³ä¹ä»£ç 
                print("æ’­æ”¾éŸ³ä¹")
            except ImportError:
                print("æ— æ³•å¯¼å…¥éŸ³ä¹æ’­æ”¾æ¨¡å—")
    def pip_available(self):
        # æ£€æŸ¥ pip å¯ç”¨
        try:
            subprocess.check_call([sys.executable, '-m', 'pip', 'install', 'pip'])
            subprocess.check_call([sys.executable, '-m', 'pip', 'install', 'soundfile'])
            subprocess.check_call([sys.executable, '-m', 'pip', 'install', 'pillow'])
            subprocess.check_call([sys.executable, '-m', 'pip', 'install', 'sounddevice'])
            return True
        except (subprocess.CalledProcessError, FileNotFoundError): #å¯èƒ½ç‰ˆæœ¬ä¸å…¼å®¹
            return False
    def show_popups(self):
        # é€’å½’è°ƒç”¨ï¼Œæ¯æ¬¡å¼¹å‡ºä¸€ä¸ªæ–°çš„å¼¹çª—
        self._show_popup_count = 0

        def schedule_popup():
            if self._show_popup_count < self.popup_count:
                delay = random.randint(250, 1000)  # éšæœºå»¶è¿Ÿæ—¶é—´ï¼ˆ1åˆ°3ç§’ï¼‰
                self.root.after(delay, self.show_popup)
                self._show_popup_count += 1
                # å®‰æ’ä¸‹ä¸€æ¬¡å¼¹çª—
                self.root.after(delay + 25, schedule_popup)  # å»¶è¿Ÿ+1ç§’å†å®‰æ’ä¸‹ä¸€ä¸ªå¼¹çª—
            elif self._show_popup_count == self.popup_count:
                self.root.quit()
            
        
        schedule_popup()
    
    def show_popup(self):
        #print("show_popup æ–¹æ³•è¢«è°ƒç”¨") debug
        popup_window = tk.Toplevel(self.root)
        popup_window.title("å¼¹çª—")
        popup_window.geometry("200x100")
        ikun_text_countdown_number=max(0, int((self.popup_count - self._show_popup_count -2 ) / 2)) #kunå•Šï¼Œæˆ‘ä¹Ÿä¸çŸ¥ä¸ºä»€ä¹ˆé™¤ä»¥2ï¼Œä½†æ˜¯è¿™æ ·ä¸ä¼šå‡ºç°æŠ¥é”™ï¼Œåˆšæ‰ç”¨è„‘å­æƒ³äº†å¾ˆä¹…ï¼Œä¹±å†™çš„é™¤ä»¥2å°±å¾—åˆ°äº†æœŸç›¼å€¼        print(ikun_text_countdown_number)
        label = tk.Label(popup_window, text=self.ikun_text_list[ikun_text_countdown_number]) #æœŸæœ›æ•°å€¼æ¯æ¬¡å¼¹çª—-1
        label.pack(pady=20)
        
        # 1 ç§’åå…³é—­å¼¹çª—
        popup_window.after(1000, popup_window.destroy)





    def show_random_popup(self):
        #print("show_random_popup æ–¹æ³•è¢«è°ƒç”¨")
        # éšæœºé€‰æ‹©å¼¹çª—æ˜¾ç¤ºçš„æ—¶é—´ï¼ˆä¾‹å¦‚ 1 åˆ° 3 ç§’ä¹‹é—´ï¼‰
        delay = random.randint(250, 1000)  # æ—¶é—´å•ä½æ˜¯æ¯«ç§’
        
        # å¼¹çª—å‡½æ•°
        def popup():
            popup_window = tk.Toplevel(self.root)
            popup_window.title("å¼¹çª—")
            popup_window.geometry("200x100")
            label = tk.Label(popup_window, text='è¯·æ¬£èµâ€˜é¸¡é¸¡ä½ å°¼å¤ªç¾â€™')
            label.pack(pady=20)
            
            # 1 ç§’åå…³é—­å¼¹çª—
            popup_window.after(1000, popup_window.destroy)
        
        # å»¶è¿Ÿæ—¶é—´åæ˜¾ç¤ºå¼¹çª—
        self.root.after(delay, popup)

    def os_check(self):
        if self.system_os == 'Linux':
            print("\033[1;33mæ¬¢è¿\033[0mä½¿ç”¨ï¼Œ\033[1;31mkunä½ å¤ªç¾\033[0m")
            time.sleep(1)
            os.system('clear')
        elif self.system_os == 'Windows':
            try:
                import progress
            except ImportError:
                time.sleep(2)
                messagebox.showwarning("è­¦å‘Š", "ç¨åé‡è¯•ï¼Œæ­£åœ¨è¡¥å……ä¾èµ–")

                # os.system('cls') # ä½ å¯ä»¥å–æ¶ˆæ³¨é‡Šä»¥æ¸…é™¤å±å¹•
        else:
            print(f"ä¸æ”¯æŒè¯¥ {self.system_os} ç³»ç»Ÿ")
            time.sleep(10)
            sys.exit()

# åˆ›å»ºä¸»çª—å£
root = tk.Tk()
root.title("lğŸ€ğŸ€.5")
root.geometry("600x400")  # å¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´çª—å£å¤§å°

# åˆ›å»º Tool å®ä¾‹
tool = Tool(root)

# ä½¿ç”¨ç¤ºä¾‹ï¼ˆè°ƒç”¨ os_check æ–¹æ³•ï¼‰
tool.os_check()


# è¿è¡Œä¸»å¾ªç¯
root.mainloop()

__Author__ = "leebro"
__project_start_time__ = "2024"
HERE = os.path.abspath(os.path.dirname(__file__))
#download_url='cxk.lwb.lol'

setup(
    name="love_ikun",  # sycc
    py_modules=["cxk1","cxk2"],
    version="0.0.25",
    description="è™¹æºä¸‰å¼(ä¸€ä¸ªæœ‰æŠ€æœ¯å«é‡çš„å››åœ†è®¡ç®—å™¨)",  # åŸ
    #long_description=R,
    classifiers=[
        "Natural Language :: Chinese (Simplified)",
        "Development Status :: 6 - Mature",
        "Operating System :: Microsoft :: Windows",
        "Operating System :: POSIX :: Linux",
        "Operating System :: Android",
        "Topic :: Scientific/Engineering :: Mathematics",
        "Topic :: Terminals",
        "Topic :: System :: Shells",
        "Programming Language :: Python :: 3",
        "Programming Language :: Python :: 3 :: Only",
        "Programming Language :: Python :: 3.7",
        "Programming Language :: Python :: 3.8",
        "Programming Language :: Python :: 3.9",
        "Programming Langugge :: Python :: 3.10"
        "Programming Langugge :: Python :: 3.11"
        "Programming Langugge :: Python :: 3.12"
        "Intended Audience :: Developers",
    ],
    keywords=[
        "ikun",
        "edu",
    ],  # å…³é”®å­—
    author=__Author__,
    author_email="ikun@lwb.lol",
    url="https://github.com",
    license="ikun license",
    packages=[...],
    python_requires=">=3.6",
    install_requires=["netifaces>=0.11.0", "sycc>=0.7.0","pip"],
    entry_points={
        "console_scripts": [
            "ikun-run = ",
            "get-pip = pip_check.get_pip:main",
        ]
    },
    package_dir = {
                   ''
                   
                   
                   
                   
                   },
    project_urls={
        "github": "https://github.com/py-lwb/sycc",
        "home": "https://github.com"
    },
    include_package_data=True,
    zip_safe=True,
)


